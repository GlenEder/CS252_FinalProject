<!DOCTYPE html>
<html>
    <head>
        <title>Feast>Infect Create Account</title>
        
        <style>
           * {
               text-align: center;
           }
        </style>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

        <script>
            //create socket to server
            let socket = io.connect('http://localhost:6656');

            socket.on('userExists', function() {
                document.getElementById("passError").innerHTML = "Username is already taken";
            })

            socket.on('userCreated', function() {
                window.location.href = "createJoin.html";
            })

            function createTheAccount() {

                //check for empty feilds
                if(document.getElementById("PASSWORD").value == "" || document.getElementById("PASSWORD_2").value == "" || document.getElementById("USERNAME").value == "") {
                    document.getElementById("passError").innerHTML = "All Entry Fields must be filled.";
                }
                //check passwords match
                else if(document.getElementById("PASSWORD").value != document.getElementById("PASSWORD_2").value) {
                    document.getElementById("passError").innerHTML = "Passwords do not match!";
                }
                else {
                   
                    let data = {
                        name: document.getElementById("USERNAME").value,
                        password: document.getElementById("PASSWORD").value
                    }

                    //send new user data to server
                    socket.emit('createUser', data);
                }
            }
        </script>
    </head>
    <body>
        <h1>FEAST>INFECT Account Creation</h1>

        <form>
            Username:<br>
            <input type="text" id="USERNAME"><br>
            Password:<br>
            <input type="password" id="PASSWORD"><br>
            Re-Enter Password:<br>
            <input type="password" id="PASSWORD_2">
            
            <br><br>
            <input type="button" value="Submit" onclick="createTheAccount()">
        </form>
        <p id="passError" style="color:red;"></p>

    </body>
</html>